# Blocking vs Non Blocking / 동기 vs 비동기

Block과 Non Block, Sync과 Async 개념을 이해하기 위해 사용할 용어

- 제어권 
  - 제어권을 가진 함수는 자신의 코드를 끝까지 실행한 후, 자신을 호출한 함수에게 제어권을 돌려준다.
- 결과값을 기다린다.
  - A에서 B함수를 호출했을 때 A가 B함수의 결과값을 기다리는지 여부



## Blocking vs Non Blocking

A함수가 B함수를 호출했을 때 **제어권을 어떻게 처리느냐에 따라 달라진다**. 

### **Blocking**

- A 함수가 B함수를 호출하면 제어권을 A가 호출한 B함수에게 넘겨준다.

- ![이미지](https://media.vlpt.us/images/nittre/post/8cdc0a02-d469-47d5-96c8-f6aeef204eb7/image.png)  이미지 출처 - [velog](https://velog.io/@nittre/%EB%B8%94%EB%A1%9C%ED%82%B9-Vs.-%EB%85%BC%EB%B8%94%EB%A1%9C%ED%82%B9-%EB%8F%99%EA%B8%B0-Vs.-%EB%B9%84%EB%8F%99%EA%B8%B0)
- 제어권을 넘겨받은 B는 함수를 실행하고 , 제어권을 넘겨준 A는 함수 실행을 멈춘다.
- B함수가 실행이 끝나면 자신을 호출한 A에게 제어권을 돌려주고 A는 다시 함수를 실행한다. 

### **Non Blocking**

- A함수가 B함수를 호출해도 제어권을 그대로 가지고 있다. 
- ![이미지](https://media.vlpt.us/images/nittre/post/c839fc04-1788-4063-ab38-b0d4a312dbf4/image.png)  
- A함수가 B 함수를 호출하면 B함수는 실행되지만 제어권은 A가 그대로 가지고 있다. 
- 따라서 A함수는 B함수를 호출하고 나서도 자신의 코드를 계속 실행한다. 

## Synchronous (동기) vs Asynchronous (비동기)

호출되는 함수의 작업 완료 여부를 신경쓰는지의 여부이다.

### 동기

함수 A가 B함수를 호출한 뒤 함수 B의 리턴값(결과)를 계속 확인한다. 

### 비동기

함수 A가 B함수를 호출할 때 콜백함수를 전달해서, 함수 B의 작업이 완료되면 함께 보낸 콜백함수를 실행하게 한다. 



## 블로킹 / 논블로킹 / 동기 / 비동기 섞어보기

### 1. 동기 - 블로킹

함수 A는 함수 B의 리턴값을 필요로하며, 제어권도 넘겨준다.

B가 실행이 끝날 때 까지 기다렸다가 B가 A에게 제어권을 넘겨주고 결과를 줄 때 까지 기다린다. 

> - 선배님 : 지수님 이거 좀 해주시겠어요
> - 나 : 넵 잠시만 기다려주세요
> - 선배님 : (기다림.... 결과 궁금....)
> - 나: 아직 하는중..
> - 나: (끝남) 선배님 다했어요!!이제 가셔도돼요!!
> - 선배님: 오 감사합니다 끝나셨군요

### 2. 동기 - 논블로킹

함수 A는 함수 B의 리턴값을 필요로하지만, 제어권은 A가 가지고있는다.

대신 A가 B에게 계속적으로 리턴값을 요구하는 요청을 보내 결과를 확인한다. 

> - 선배님 : 지수님 이거좀 해주시곘어요
> - 나 : 넵 알겠습니다 
> - 선배님: (자리로감)
> - 선배님 : 지수님 혹시 다하셨나요?
> - 나 : 아니요..ㅠ 
> - 선배님 : 지수님 혹시 다  ?
> - 나 : ..ㅠㅠ
> - 선배님 : 지수님 혹시  다 ?
> - 나 : 넵 저 끝났습니다. 결과 여기있습니다

### 3. 비동기 - 논블로킹

A는 B함수를 호출하고, 제어권은 A가 가지고 B를 호출한 후에도 자신의 코드를 수행한다.   

또한 B함수의 결과를 궁금해하지 않고, 콜백함수를 넘겨 B가 실행이 끝나 콜백함수를 실행한다. 

> - 선배님 : 지수님 이거좀 해주시겠어요 **끝나면 말좀해주세요**
> - 선배님 : (자리로감 **자기 할거 함** )
> - 나 : 넵 
> - 선배님 : (할거함)
> - 나: (하는중)
> - 나: (다함) 선배님자리로가서 **선배님 저 다 했어요**
> - 선배님 : 아 넵 이따 확인해볼게요 

### 4. 비동기 - 블로킹

A함수는 B함수의 리턴값에 신경 쓰지 않지만, B에게 제어권을 넘겨주었기 때문에 B가 다 수행되고 A에게 제어권을 넘겨줄 때 까지 기다려야한다. 

> - 선배님 : 지수님 이거 좀 해보시겠어요 (근데결과는안궁금함)
> - 나 : 넵 근데 잠시만 여기서 기다려주실래요
> - 선배님 : (기다림..관심없음..)
> - 나 : (하는중..)
> - 나 : 이제 가셔도 돼요! 끝났습니다  

- 그림, 내용 출처 	
  - [velog @nittre](https://velog.io/@nittre/%EB%B8%94%EB%A1%9C%ED%82%B9-Vs.-%EB%85%BC%EB%B8%94%EB%A1%9C%ED%82%B9-%EB%8F%99%EA%B8%B0-Vs.-%EB%B9%84%EB%8F%99%EA%B8%B0)
- 예시 출처
  - [티스토리 joooing](https://joooing.tistory.com/entry/%EB%8F%99%EA%B8%B0%EB%B9%84%EB%8F%99%EA%B8%B0-%EB%B8%94%EB%A1%9C%ED%82%B9%EB%85%BC%EB%B8%94%EB%A1%9C%ED%82%B9)



| **--**     | **블로킹**                                                   | **논블로킹**                                   |
| ---------- | ------------------------------------------------------------ | ---------------------------------------------- |
| **동기**   | Read/Write                                                   | Read/Write polling<br />계속 완료되었는지 확인 |
| **비동기** | I/O Multiplexing<br />select / Poll<br />nodejs+mysql 조합..?<br /> | Asynchronous I/O                               |


